(this["webpackJsonpcra-hive"]=this["webpackJsonpcra-hive"]||[]).push([[0],{114:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(28),r=n(16),i=n(26),o=n(2),c=n(3),s=n(19),h=n(22),u=n(20),l=n(25),d=function(){function e(){Object(o.a)(this,e),this.map=void 0,this.map=new Map}return Object(c.a)(e,[{key:"get",value:function(e){return this.map.get(JSON.stringify(e))}},{key:"set",value:function(e,t){return this.map.set(JSON.stringify(e),t)}},{key:"delete",value:function(e){return this.map.delete(JSON.stringify(e))}},{key:"has",value:function(e){return this.map.has(JSON.stringify(e))}},{key:"keys",value:Object(l.a)().mark((function e(){var t,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(i.a)(this.map.keys()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return a=n.value,e.next=7,JSON.parse(a);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))}]),e}(),j=function(){function e(){Object(o.a)(this,e),this.set=new Set}return Object(c.a)(e,[{key:"add",value:function(e){return this.set.add(JSON.stringify(e))}},{key:"has",value:function(e){return this.set.has(JSON.stringify(e))}},{key:"values",value:Object(l.a)().mark((function e(){var t,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(i.a)(this.set.values()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return a=n.value,e.next=7,JSON.parse(a);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))}]),e}(),b=function(){function e(){Object(o.a)(this,e),this.map=void 0,this.root=void 0,this.map=new d}return Object(c.a)(e,[{key:"at",value:function(e){var t=this.map.get(e);return t[t.length-1]}},{key:"removeStone",value:function(e){this.map.get(e).pop(),this.map.get(e).length||this.map.delete(e)}},{key:"addStone",value:function(e,t){this.root=e,this.map.has(e)?this.map.get(e).push(t):this.map.set(e,[t])}},{key:"gameResult",value:function(){var e,t=!1,n=!1,a=Object(i.a)(this.map.keys());try{for(a.s();!(e=a.n()).done;){var r=e.value,o=this.map.get(r)[0];o.insect===s.a.BEE&&6===this.neighbors(r).length&&(o.team===h.a.WHITE?t=!0:n=!0)}}catch(c){a.e(c)}finally{a.f()}return[t,n]}},{key:"neighbors",value:function(e){var t=this;return u.f(e).filter((function(e){return t.map.has(e)}))}},{key:"height",value:function(e){return this.map.has(e)?this.map.get(e).length:0}},{key:"generateSingleWalks",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[],o=Object(i.a)(u.c(e));try{for(o.s();!(t=o.n()).done;){var c=Object(r.a)(t.value,3),s=c[0],h=c[1],l=c[2];this.map.has(h)||(null===n?this.map.has(s)!==this.map.has(l)&&a.push(h):(this.map.has(s)&&!u.d(s,n))!==(this.map.has(l)&&!u.d(l,n))&&a.push(h))}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"generateWalks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=new j,a=new d,r=[],o=[];for(r.push(e),a.set(e,0);r.length;){var c=r.shift();n.add(c);var s,h=Object(i.a)(this.generateSingleWalks(c,e));try{for(h.s();!(s=h.n()).done;){var l=s.value;n.has(l)||(a.set(l,a.get(c)+1),r.push(l))}}catch(f){h.e(f)}finally{h.f()}if(-1!==t||u.d(c,e)){var b=a.get(c);if(b>t)continue;b===t&&o.push(c)}else o.push(c)}return o}},{key:"generateSpiderWalks",value:function(e){return this.generateWalks(e,3)}},{key:"generateJumps",value:function(e){var t,n=[],a=Object(i.a)(u.e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(this.map.has(u.b(e,r))){for(var o=2;this.map.has(u.b(e,u.g(r,o)));)o++;n.push(u.b(e,u.g(r,o)))}}}catch(c){a.e(c)}finally{a.f()}return n}},{key:"generateClimbs",value:function(e){var t=[],n=this.height(e);if(n>1){var a,o=Object(i.a)(u.c(e));try{for(o.s();!(a=o.n()).done;){var c=Object(r.a)(a.value,3),s=c[0],h=c[1],l=c[2];this.height(h)<n&&(this.height(s)<n||this.height(l)<n)&&t.push(h)}}catch(x){o.e(x)}finally{o.f()}}else t.concat(this.generateSingleWalks(e));var d,j=Object(i.a)(u.c(e));try{for(j.s();!(d=j.n()).done;){var b=Object(r.a)(d.value,3),f=b[0],v=b[1],O=b[2],p=this.height(f),m=this.height(v),g=this.height(O);m>=n&&!(p>n&&g>n)&&t.push(v)}}catch(x){j.e(x)}finally{j.f()}return t}},{key:"_checkNeighborTeam",value:function(e,t){var n=this;return this.neighbors(e).every((function(e){return n.at(e).team===t}))}},{key:"generateDrops",value:function(e){var t,n=this,r=new j,o=Object(i.a)(this.map.keys());try{for(o.s();!(t=o.n()).done;){var c=t.value;u.f(c).filter((function(e){return!n.map.has(e)})).forEach((function(e){return r.add(e)}))}}catch(s){o.e(s)}finally{o.f()}return Object(a.a)(r.values()).filter((function(t){return n._checkNeighborTeam(t,e)}))}},{key:"_oneHive",value:function(){var e=this,t=new d,n=new j,a=new d,r=new j;return void 0!==this.root&&function o(c,s,h){n.add(c),h++,a.set(c,h),t.set(c,h);var l,d=0,j=Object(i.a)(e.neighbors(c));try{for(j.s();!(l=j.n()).done;){var b=l.value;s&&u.d(b,s)||(n.has(b)?t.set(c,Math.min(t.get(c),a.get(b))):(o(b,c,h),t.set(c,Math.min(t.get(c),t.get(b))),t.get(b)>=a.get(c)&&null!==s&&r.add(c),d++))}}catch(f){j.e(f)}finally{j.f()}null===s&&d>=2&&r.add(c)}.call(this,this.root,null,0),r}},{key:"generateMovesFrom",value:function(e){return this.map.has(e)?new Map([[s.a.BEE,this.generateSingleWalks],[s.a.SPIDER,this.generateSpiderWalks],[s.a.ANT,this.generateWalks],[s.a.GRASSHOPPER,this.generateJumps],[s.a.BEETLE,this.generateClimbs]]).get(this.at(e).insect).call(this,e):[]}},{key:"generateMoves",value:function(e){var t,n=this,a=[],r=this._oneHive(),o=Object(i.a)(this.map.keys());try{var c=function(){var i=t.value;n.at(i).team===e&&(n.height(i)>1||!r.has(i))&&n.generateMovesFrom(i).forEach((function(e){a.push([i,e])}))};for(o.s();!(t=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}return a}}]),e}()},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(187),r=n(183),i=n(4);function o(e){var t=e.p1,n=e.p2,o=Object(r.a)(),c=o.state,s=o.apply,h=(c.turnNumber%2===0?t:n)((function(e){return!!c.isLegal(e)&&(s(e),!0)}),c);return Object(i.jsx)(a.a,{state:c,controller:h})}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(21),r=n(45),i=n(50),o=n(194),c=n(19),s=n(57),h=n(4),u=["insect"];function l(e){var t=e.insect,n=Object(r.a)(e,u),l=Object(i.e)(o.a,"/objects/".concat(t,"/").concat(t===c.a.BEE?"bumblebee":t,".gltf")).scene.clone();return Object(h.jsx)(s.animated.primitive,Object(a.a)({object:l},n))}},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(16),r=n(161),i=n(197),o=n(169),c=n(198),s=n(37),h=n(89),u=n(0),l=n(46),d=n(195),j=n.n(d),b=n(4);function f(e){var t=e.open,n=e.setOpen,h=Object(u.useState)("local"),d=Object(a.a)(h,2),f=d[0],v=d[1],O=Object(u.useState)("red"),p=Object(a.a)(O,2),m=p[0],g=p[1];return Object(b.jsxs)(r.a,{dimmer:"blurring",open:t,children:[Object(b.jsx)(r.a.Header,{children:"Create a new Game of Hive"}),Object(b.jsx)(r.a.Content,{children:Object(b.jsx)(i.a,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(c.a,{as:"h3",children:"Play against"}),Object(b.jsx)(o.a.Field,{children:Object(b.jsxs)(s.a.Group,{children:[Object(b.jsx)(s.a,{onClick:function(){return v("local")},children:"Yourself "}),Object(b.jsx)(s.a.Or,{}),Object(b.jsx)(s.a,{onClick:function(){return v("ai")},children:"A very stupid computer "}),Object(b.jsx)(s.a.Or,{}),Object(b.jsx)(s.a,{onClick:function(){return v("online")},children:"Friend "})]})}),Object(b.jsx)(c.a,{as:"h3",children:"Start as"}),Object(b.jsx)(o.a.Field,{children:Object(b.jsxs)(s.a.Group,{children:[Object(b.jsx)(s.a,{onClick:function(){return g("white")},color:"red",children:"red "}),Object(b.jsx)(s.a.Or,{}),Object(b.jsx)(s.a.Or,{inverted:!0}),Object(b.jsx)(s.a,{onClick:function(){return g("black")},color:"blue",children:"blue "})]})})]})})}),Object(b.jsxs)(r.a.Actions,{children:[Object(b.jsx)(s.a,{negative:!0,onClick:function(){return n(!1)},children:"Cancel"}),Object(b.jsx)(s.a,{positive:!0,onClick:function(){n(!1)},as:l.b,to:function(e){var t=j()();return"online"===f&&fetch("/game/".concat(t),{method:"POST"}).catch((function(e){return console.log("Failed to create game",e)})),"ai"===f?{pathname:"/play/".concat(t),search:"?team=white&mode=".concat(f)}:{pathname:"/play/".concat(t),search:"?team=".concat(m,"&mode=").concat(f)}},children:"Create"})]})]})}function v(e){var t=e.content,n=Object(u.useState)(!1),r=Object(a.a)(n,2),i=r[0],o=r[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(s.a,{inverted:!0,icon:!0,labelPosition:"left",onClick:function(){return o(!0)},children:[Object(b.jsx)(h.a,{name:"plus square outline"}),t]}),Object(b.jsx)(f,{open:i,setOpen:o})]})}},181:function(e,t,n){"use strict";function a(e){return"black"===e?"blue":"white"===e?"red":"grey"}function r(e){var t=e[0],n=e[1];return t&&n?"tie":t?a("black")+" won":n?a("white")+" won":"undecided"}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(16),r=n(0),i=n(66);function o(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(new i.a),s=Object(a.a)(c,2),h=s[0],u=s[1],l=Object(r.useState)(0),d=Object(a.a)(l,2),j=d[0],b=d[1];return{apply:function(e){n[j]=e,o(n),u(h.apply(e)),b(j+1)},undo:function(){var e=n[j];u(h.undo(e)),b(j-1)},state:h,reset:function(){o([]),u(new i.a),b(0)}}}},184:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(94),r=n(124),i=n(4);function o(){var e=a.a,t=a.a;return Object(i.jsx)(r.a,{p1:e,p2:t})}},187:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(62),r=n(63),i=n(161),o=n(242),c=n(198),s=n(37),h=n(46),u=n(181),l=n(147),d=n(4);function j(e){var t=e.open,n=e.result,a=Object(u.b)(n);return Object(d.jsx)(i.a,{dimmer:"blurring",open:t,children:Object(d.jsxs)(o.a,{inverted:!0,children:[Object(d.jsx)(i.a.Header,{children:Object(d.jsxs)(c.a,{inverted:!0,as:"h1",children:["Game over: ",a," "]})}),Object(d.jsx)("hr",{}),Object(d.jsxs)(i.a.Actions,{children:[Object(d.jsx)(l.a,{content:"Play another round"}),Object(d.jsx)(s.a,{negative:!0,as:h.b,to:"/",children:"Leave"})]})]})})}function b(e){var t=e.state,n=e.controller,i=n.highlighted,o=n.handleBoardClick,c=n.handleDropClick;return Object(d.jsxs)("div",{children:[Object(d.jsx)(j,{open:t.gameOver,result:t.result}),Object(d.jsx)(r.a,{stones:t._stones,team:t.team,handleClick:c,allowedToDrop:t.allowedToDrop.bind(t)}),Object(d.jsx)(a.a,{hive:t.hive,handleClick:o,highlighted:i,team:t.team})]})}},19:function(e,t,n){"use strict";var a;!function(e){e.BEE="bee",e.SPIDER="spider",e.ANT="ant",e.GRASSHOPPER="grasshopper",e.BEETLE="beetle"}(a||(a={})),t.a=a},20:function(e,t,n){"use strict";function a(e,t){return{x:e,y:t}}function r(e,t,n){if(n=-(e+t),0!==Math.round(e+t+n))throw Error("q + r + s must be 0");return{q:e,r:t,s:n}}function i(e,t){return e.q===t.q&&e.r===t.r}function o(e,t){return r(e.q+t.q,e.r+t.r,e.s+t.s)}function c(e,t){return r(e.q-t.q,e.r-t.r,e.s-t.s)}function s(e,t){return r(e.q*t,e.r*t,e.s*t)}n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"j",(function(){return I})),n.d(t,"h",(function(){return H})),n.d(t,"i",(function(){return q}));var h=[r(1,0,-1),r(1,-1,0),r(0,-1,1),r(-1,0,1),r(-1,1,0),r(0,1,-1)];function u(e){return h.map((function(t){return function(e,t){return o(e,t)}(e,t)}))}function l(e){for(var t=u(e),n=[],a=0;a<6;a++)n.push([t[a],t[(a+1)%6],t[(a+2)%6]]);return n}var d=[r(2,-1,-1),r(1,-2,1),r(-1,-1,2),r(-2,1,1),r(-1,2,-1),r(1,1,-2)];function j(e,t){return n=c(e,t),(Math.abs(n.q)+Math.abs(n.r)+Math.abs(n.s))/2;var n}function b(e){var t=Math.round(e.q),n=Math.round(e.r),a=Math.round(e.s),i=Math.abs(t-e.q),o=Math.abs(n-e.r),c=Math.abs(a-e.s);return i>o&&i>c?t=-n-a:o>c?n=-t-a:a=-t-n,r(t,n,a)}function f(e,t,n){return r(e.q*(1-n)+t.q*n,e.r*(1-n)+t.r*n,e.s*(1-n)+t.s*n)}function v(e,t){return{col:e,row:t}}var O=-1;function p(e,t){var n=t.q,a=t.r+(t.q+e*(1&t.q))/2;if(1!==e&&e!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return v(n,a)}function m(e,t){var n=t.col,a=t.row-(t.col+e*(1&t.col))/2,i=-n-a;if(1!==e&&e!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return r(n,a,i)}function g(e,t){var n=t.q+(t.r+e*(1&t.r))/2,a=t.r;if(1!==e&&e!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return v(n,a)}function x(e,t){var n=t.col-(t.row+e*(1&t.row))/2,a=t.row,i=-n-a;if(1!==e&&e!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return r(n,a,i)}function y(e,t){return{col:e,row:t}}function w(e){return y(e.q,2*e.r+e.q)}function k(e){var t=e.col,n=(e.row-e.col)/2;return r(t,n,-t-n)}function E(e){return y(2*e.q+e.r,e.r)}function S(e){var t=(e.col-e.row)/2,n=e.row;return r(t,n,-t-n)}function T(e,t,n,a,r,i,o,c,s){return{f0:e,f1:t,f2:n,f3:a,b0:r,b1:i,b2:o,b3:c,start_angle:s}}function _(e,t,n){return{orientation:e,size:t,origin:n}}var A=T(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),I=T(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0);function H(e,t){var n=e.orientation,r=e.size,i=e.origin,o=(n.f0*t.q+n.f1*t.r)*r.x,c=(n.f2*t.q+n.f3*t.r)*r.y;return a(o+i.x,c+i.y)}function C(e,t){var n=e.orientation,i=e.size,o=e.origin,c=a((t.x-o.x)/i.x,(t.y-o.y)/i.y),s=n.b0*c.x+n.b1*c.y,h=n.b2*c.x+n.b3*c.y;return r(s,h,-s-h)}var q=_(I,a(1,1),a(0,0));_(A,a(1,1),a(0,0));function M(e){console.log("FAIL",e)}function B(e,t,n){t.q===n.q&&t.s===n.s&&t.r===n.r||M(e)}function P(e,t,n){t.col===n.col&&t.row===n.row||M(e)}function N(e,t,n){t.col===n.col&&t.row===n.row||M(e)}function D(e,t,n){t!==n&&M(e)}function R(){B("hex_direction",r(0,-1,1),h[2])}function W(){B("hex_diagonal",r(-1,-1,2),o(r(1,-2,1),d[3]))}function L(){var e;B("hex_rotate_right",(e=r(1,-3,2),r(-e.r,-e.s,-e.q)),r(3,-2,-1))}function G(){var e;B("hex_rotate_left",(e=r(1,-3,2),r(-e.s,-e.q,-e.r)),r(-2,-1,3))}function K(){!function(e,t,n){D(e,t.length,n.length);for(var a=0;a<t.length;a++)B(e,t[a],n[a])}("hex_linedraw",[r(0,0,0),r(0,-1,1),r(0,-2,2),r(1,-3,2),r(1,-4,3),r(1,-5,4)],function(e,t){for(var n=j(e,t),a=r(e.q+1e-6,e.r+1e-6,e.s-2e-6),i=r(t.q+1e-6,t.r+1e-6,t.s-2e-6),o=[],c=1/Math.max(n,1),s=0;s<=n;s++)o.push(b(f(a,i,c*s)));return o}(r(0,0,0),r(1,-5,4)))}B("hex_add",r(4,-10,6),o(r(1,-3,2),r(3,-7,4))),B("hex_subtract",r(-2,4,-2),c(r(1,-3,2),r(3,-7,4))),R(),W(),D("hex_distance",7,j(r(3,-7,4),r(0,0,0))),L(),G(),function(){var e=r(0,0,0),t=r(1,-1,0),n=r(0,-1,1);B("hex_round 1",r(5,-10,5),b(f(r(0,0,0),r(10,-20,10),.5))),B("hex_round 2",b(e),b(f(e,t,.499))),B("hex_round 3",b(t),b(f(e,t,.501))),B("hex_round 4",b(e),b(r(.4*e.q+.3*t.q+.3*n.q,.4*e.r+.3*t.r+.3*n.r,.4*e.s+.3*t.s+.3*n.s))),B("hex_round 5",b(n),b(r(.3*e.q+.3*t.q+.4*n.q,.3*e.r+.3*t.r+.4*n.r,.3*e.s+.3*t.s+.4*n.s)))}(),K(),function(){var e=r(3,4,-7),t=_(I,a(10,15),a(35,71));B("layout",e,b(C(t,H(t,e))));var n=_(A,a(10,15),a(35,71));B("layout",e,b(C(n,H(n,e))))}(),function(){var e=r(3,4,-7),t=v(1,-3);B("conversion_roundtrip even-q",e,m(1,p(1,e))),P("conversion_roundtrip even-q",t,p(1,m(1,t))),B("conversion_roundtrip odd-q",e,m(O,p(O,e))),P("conversion_roundtrip odd-q",t,p(O,m(O,t))),B("conversion_roundtrip even-r",e,x(1,g(1,e))),P("conversion_roundtrip even-r",t,g(1,x(1,t))),B("conversion_roundtrip odd-r",e,x(O,g(O,e))),P("conversion_roundtrip odd-r",t,g(O,x(O,t)))}(),P("offset_from_cube even-q",v(1,3),p(1,r(1,2,-3))),P("offset_from_cube odd-q",v(1,2),p(O,r(1,2,-3))),B("offset_to_cube even-",r(1,2,-3),m(1,v(1,3))),B("offset_to_cube odd-q",r(1,2,-3),m(O,v(1,2))),function(){var e=r(3,4,-7),t=y(1,-3);B("conversion_roundtrip doubled-q",e,k(w(e))),N("conversion_roundtrip doubled-q",t,w(k(t))),B("conversion_roundtrip doubled-r",e,S(E(e))),N("conversion_roundtrip doubled-r",t,E(S(t)))}(),N("doubled_from_cube doubled-q",y(1,5),w(r(1,2,-3))),N("doubled_from_cube doubled-r",y(4,2),E(r(1,2,-3))),B("doubled_to_cube doubled-q",r(1,2,-3),k(y(1,5))),B("doubled_to_cube doubled-r",r(1,2,-3),S(y(4,2)))},22:function(e,t,n){"use strict";var a;!function(e){e.WHITE="white",e.BLACK="black"}(a||(a={})),t.a=a},225:function(e,t){},227:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(84),o=n.n(i),c=n(46),s=n(30),h=n(37),u=n(89),l=n(4);function d(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:" Welcome to HiveMind "}),"On this site you can play the awesome game Hive. Just create a game with the button in the top-bar and invite a friend to play. Make sure check out the ",Object(l.jsx)(c.b,{to:"/tutorial",children:" tutorial "})," for an introduction to the rules. Unfortunately the mobile version can be a bit rough to use.",Object(l.jsx)("h2",{children:" The game Hive "}),"Hive is a abstract strategic board game designed by John Yianni and published by ",Object(l.jsx)("a",{href:"https://www.gen42.com/games/hive",children:" Gen 42"}),". If you want to know more about it ",Object(l.jsx)("a",{href:"https://boardgamegeek.com/boardgame/2655/hive",children:"boardgamegeek"})," is a good place to start.",Object(l.jsx)("h2",{children:" Development "}),"The frontend uses",Object(l.jsx)("a",{href:"https://reactjs.org/",children:" react "}),"bootstrapped by",Object(l.jsx)("a",{href:"https://create-react-app.dev/",children:" Create React App "}),"and",Object(l.jsx)("a",{href:"https://react.semantic-ui.com/",children:" Semantic UI "}),Object(l.jsx)("a",{href:"https://socket.io/",children:" Socket.IO "}),"is used to communicate between the backend which is powered by",Object(l.jsx)("a",{href:"https://expressjs.com/",children:" Express "}),". The project started as a simple",Object(l.jsx)("a",{href:"https://www.pygame.org/news",children:" Pygame "}),"app and was rewritten multiple times. Most of the codebase is in a transition from javascript to ",Object(l.jsx)("a",{href:"https://www.typescriptlang.org/.",children:"Typescript "}),". If you are interested you can find the source code on",Object(l.jsx)("a",{href:"https://github.com/gottschali/HiveMind",children:Object(l.jsxs)(h.a,{color:"grey",children:[Object(l.jsx)(u.a,{name:"github"})," Github"]})}),"Just be aware that is my first bigger web-dev project and there are many ugly things lurking in the code.",Object(l.jsx)("hr",{}),Object(l.jsxs)("footer",{children:["This is a side project of Ali G. In the future you may find more of his projects on ",Object(l.jsx)("a",{href:"https://gschall.ch/",children:" gschall.ch "}),".",Object(l.jsxs)("p",{children:[Object(l.jsx)("a",{href:"mailto:post@aligottschall.ch",children:"Send some feedback"}),"."]})]})]})}var j=n(16),b=n(66),f=n(62),v=function(){var e=Object(a.useState)(new b.a),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(0),o=Object(j.a)(i,2),c=o[0],s=o[1],h=Object(a.useState)(10),u=Object(j.a)(h,2),d=u[0],v=u[1];return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:[" Step: ",n.turnNumber]}),Object(l.jsx)("button",{onClick:function(){n.step(),s(c+1)},children:" Make a Step "}),Object(l.jsx)("button",{onClick:function(){r(new b.a),s(0)},children:" Reset "}),Object(l.jsxs)("label",{children:["How many automove steps:",Object(l.jsx)("input",{value:d,onChange:function(e){return v(e.target.value)}})]}),Object(l.jsx)("button",{onClick:function(){for(var e=0;e<d;e++)n.step();s(c+d)},children:" AutoPlay "}),Object(l.jsxs)("div",{children:["Stones: ",JSON.stringify(n.stones)]})]}),Object(l.jsx)(f.a,{hive:n.hive,highlighted:[]})]})};function O(){return Object(l.jsx)(v,{})}var p=n(94),m=n(124);var g=function(){var e=p.a,t=p.a;return Object(l.jsx)(m.a,{p1:e,p2:t})};function x(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(g,{}),Object(l.jsx)(O,{})]})}var y=n(114),w=n(27),k=n(19),E=n(22),S=n(32),T=n(20),_=n(63),A=n(242),I=n(118),H=n(184);function C(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:" Learn how to play! "}),"This page was created rather in a hurry. Therefore please consult the ",Object(l.jsx)("a",{href:"https://www.gen42.com/download/rules/hive/Hive_English_Rules.pdf",children:" official rules "})," if something is not clear.",Object(l.jsx)(M,{}),Object(l.jsx)(P,{}),Object(l.jsx)(B,{}),Object(l.jsx)("h2",{children:" Insects "}),"Here the different moves of the insects are quickly described. It is best to try them out in action. You can do this at the bottom of the page. All the insects have certain move restrictions in common. For one if the insect can not physically move through a passage it is blocked. Most important the one-hive rule applies to all. Make sure to read the section covering it. When playing you can simply click on one of your insects to get all possible moves highlighted. If none are highlighted this insect has no legal moves to make.",Object(l.jsx)(D,{}),Object(l.jsx)(R,{}),Object(l.jsx)(W,{}),Object(l.jsx)(L,{}),Object(l.jsx)(G,{}),Object(l.jsx)(K,{}),Object(l.jsxs)("div",{className:"ui one column doubling stackable grid container",children:[Object(l.jsx)("h2",{children:" Try everything at once"}),"If the game gets out of hand you can also reposition the camera to get a better view. You can take control of both players and try out the rules interactively.",Object(l.jsx)(H.a,{})]})]})}function q(e){var t=e.left,n=e.right;return Object(l.jsxs)("div",{className:"ui two column doubling stackable grid container",children:[Object(l.jsx)("div",{className:"column",children:t}),Object(l.jsx)("div",{className:"column",children:n})]})}function M(){var e=new b.a;e.apply(new S.a(new w.a(k.a.GRASSHOPPER,E.a.WHITE),Object(T.a)(0,0))),e.apply(new S.a(new w.a(k.a.ANT,E.a.BLACK),Object(T.a)(1,0)));var t=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:" Introduction "}),"Hive is a strategic boardgame for two players (red and blue). Each turn they can either place or move a stone on the board. We will refer to placing an insect as ",Object(l.jsx)("i",{children:"dropping"})," and call the stones ",Object(l.jsx)("i",{children:"insects"})," from now on. Similar to chess each of the insects has its own set of rules how to move. In the beginning there is void. The starting player can then select any of his insects to drop on the board. Their opponent may answer by an insect of their own adjacent to the insect already on the board. In the remainder of the game there are restrictions how insects may be dropped. These are covered in their own section."]}),n=Object(l.jsxs)(A.a,{children:[Object(l.jsx)(f.a,{hive:e.hive,canvasHeight:"200px",interactive:!1,cameraOpts:{position:[0,-1,2]}}),";",Object(l.jsx)(I.a,{attached:"bottom",children:"An example of the first two moves in a game."})]});return Object(l.jsx)(q,{left:t,right:n})}function B(){var e=new b.a;e.apply(new S.a(new w.a(k.a.GRASSHOPPER,E.a.WHITE),Object(T.a)(0,0))),e.apply(new S.a(new w.a(k.a.ANT,E.a.BLACK),Object(T.a)(1,0)));var t=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:" Dropping "}),"When playing you can select the insect you want to drop by clicking on the menu. The number tells you how many you have still available. After the first two moves you may only drop insects adjacent to your own. This prevents dropping insects directly placing next to the bee of the opponent and the game would not be funny at all.",Object(l.jsx)("br",{}),Object(l.jsx)(_.b,{stones:e.stones,active:!0})]}),n=Object(l.jsxs)(A.a,{children:[Object(l.jsx)(f.a,{hive:e.hive,team:e.team,highlighted:e.generateDrops().map((function(e){return[e,0]})),canvasHeight:"200px",interactive:!1,cameraOpts:{position:[0,-3,4]}}),";",Object(l.jsx)(I.a,{attached:"bottom",children:"The red player may only drop insects on the highlighted hexes."})]});return Object(l.jsx)(q,{left:t,right:n})}function P(){var e=new y.a;e.addStone(Object(T.a)(0,0),new w.a(k.a.GRASSHOPPER,E.a.WHITE)),e.addStone(Object(T.a)(1,0),new w.a(k.a.BEE,E.a.BLACK)),e.addStone(Object(T.a)(0,1),new w.a(k.a.BEE,E.a.WHITE)),e.addStone(Object(T.a)(1,1),new w.a(k.a.ANT,E.a.BLACK)),e.addStone(Object(T.a)(1,-1),new w.a(k.a.SPIDER,E.a.WHITE)),e.addStone(Object(T.a)(2,0),new w.a(k.a.BEETLE,E.a.BLACK)),e.addStone(Object(T.a)(2,-1),new w.a(k.a.ANT,E.a.WHITE));var t=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:" The Goal of the Game "}),Object(l.jsxs)("p",{children:[" The goal of the game is to surround the bee ",Object(l.jsx)(h.a,{color:"grey",icon:_.c[k.a.BEE]})," of the enemy. All six adjacent hexes have to be occupied. "]}),Object(l.jsx)("p",{children:" In the example the blue player has lost as his bee is completely surrounded. Note that the color of the surrounding insects does not matter. Also the own insects count. It can happen that the bees get surrounded at the same time. In this case it is a draw. "})]}),n=Object(l.jsxs)(A.a,{children:[Object(l.jsx)(f.a,{hive:e,canvasHeight:"200px",interactive:!1,cameraOpts:{position:[1,1,4]},lookAt:[1,1,0]}),";",Object(l.jsx)(I.a,{attached:"bottom",children:"Here the red player wins because the blue bee is completely surrounded while the red bee retains three free hexes next to it."})]});return Object(l.jsx)(q,{left:t,right:n})}function N(e){var t=new y.a;return t.addStone(Object(T.a)(0,0),e),Object(l.jsx)(f.a,{hive:t,canvasHeight:"100px",interactive:!1,cameraOpts:{position:[0,-1,1]},lookAt:[0,0,0]})}function D(){var e=Object(l.jsxs)("div",{children:[Object(l.jsxs)("h2",{children:["Bee ",Object(l.jsx)(h.a,{color:"grey",icon:_.c[k.a.BEE]})]}),"The be can only move one hex a move.",Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:" You may not move any insects before you have dropped your bee "}),Object(l.jsxs)("li",{children:[" You have to drop the bee as one of your first ",Object(l.jsx)("b",{children:"four"})," insects"]})]})]}),t=N(new w.a(k.a.BEE,E.a.WHITE));return Object(l.jsx)(q,{left:e,right:t})}function R(){var e=Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{children:["Ant ",Object(l.jsx)(h.a,{color:"grey",icon:_.c[k.a.ANT]})]}),"The ant is swift and can run as many hexes around the hive as it wishes."]}),t=N(new w.a(k.a.ANT,E.a.BLACK));return Object(l.jsx)(q,{left:e,right:t})}function W(){var e=Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{children:["Spider ",Object(l.jsx)(h.a,{color:"grey",icon:_.c[k.a.SPIDER]})]}),"The spider is similar to the ant though it may only move exactly 3 hexes far."]}),t=N(new w.a(k.a.SPIDER,E.a.WHITE));return Object(l.jsx)(q,{left:e,right:t})}function L(){var e=Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{children:["Grasshopper ",Object(l.jsx)(h.a,{color:"grey",icon:_.c[k.a.GRASSHOPPER]})]}),"The grasshopper can jump in any of the six directions over as many insects as that lie in that line. But it has to land on the first unoccupied hex."]}),t=N(new w.a(k.a.GRASSHOPPER,E.a.BLACK));return Object(l.jsx)(q,{left:e,right:t})}function G(){var e=Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{children:["Beetle ",Object(l.jsx)(h.a,{color:"grey",icon:_.c[k.a.BEETLE]})]}),"The beetle is a distinct relative of the bee. But is has learned a useful skill: It may climb on other pieces and can walk on the top of the hive."]}),t=N(new w.a(k.a.BEETLE,E.a.WHITE));return Object(l.jsx)(q,{left:e,right:t})}function K(){var e=new y.a;e.addStone(Object(T.a)(0,0),new w.a(k.a.GRASSHOPPER,E.a.WHITE)),e.addStone(Object(T.a)(2,1),new w.a(k.a.BEE,E.a.BLACK)),e.addStone(Object(T.a)(-1,1),new w.a(k.a.BEE,E.a.WHITE)),e.addStone(Object(T.a)(1,1),new w.a(k.a.ANT,E.a.BLACK)),e.addStone(Object(T.a)(1,-1),new w.a(k.a.SPIDER,E.a.WHITE)),e.addStone(Object(T.a)(2,0),new w.a(k.a.BEETLE,E.a.BLACK)),e.addStone(Object(T.a)(2,-1),new w.a(k.a.ANT,E.a.WHITE));var t=Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"One Hive Rule"}),"Or the rule that makes the game actually interesting. It goes like this: An insect can only move if the hive without it would be disconnected. This means there can never be isolated insects or groups thereof. Everything has to ",Object(l.jsx)("i",{children:" stick together "}),". If you know graph theory you may know this idea as articulation points."]}),n=Object(l.jsxs)(A.a,{children:[Object(l.jsx)(f.a,{hive:e,canvasHeight:"200px",interactive:!1,cameraOpts:{position:[1,1,4]},lookAt:[1,1,0]}),";",Object(l.jsx)(I.a,{attached:"bottom",children:"In this scenario the red player could only move his bee. His other insects would disconnect the hive into two parts. The blue player on the other hand could move either his ant or queen."})]});return Object(l.jsx)(q,{left:t,right:n})}n(226);var J=n(197),F=n(240),z=n(147);function Y(e){var t=Object(a.useState)("Home"),n=Object(j.a)(t,2),r=n[0],i=n[1],o=function(e,t){var n=t.name;return i(n)};return Object(l.jsxs)(J.a,{children:[Object(l.jsx)(A.a,{inverted:!0,children:Object(l.jsxs)(F.a,{compact:!0,inverted:!0,stackable:!0,pointing:!0,secondary:!0,children:[Object(l.jsx)(F.a.Item,{header:!0,as:c.b,to:"/",name:"HiveMind",children:Object(l.jsx)("img",{src:"/favicon/android-chrome-512x512.png",alt:"logo"})}),Object(l.jsx)(F.a.Item,{as:c.b,to:"/",name:"Home",onClick:o,active:"Home"===r}),Object(l.jsx)(F.a.Item,{as:c.b,to:"/tutorial",name:"Tutorial",onClick:o,active:"Tutorial"===r}),Object(l.jsx)(F.a.Item,{name:"play",children:Object(l.jsx)(z.a,{content:"Create a game"})})]})}),e.children]})}var V=Object(a.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,262))}));function U(){return Object(l.jsx)(c.a,{children:Object(l.jsx)(Y,{children:Object(l.jsx)(a.Suspense,{fallback:Object(l.jsx)("div",{children:"Loading..."}),children:Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{exact:!0,path:"/",component:d}),Object(l.jsx)(s.a,{path:"/play/:gid",component:V}),Object(l.jsx)(s.a,{exact:!0,path:"/debug",component:x}),Object(l.jsx)(s.a,{exact:!0,path:"/tutorial",component:C})]})})})})}o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(U,{})}),document.getElementById("root"))},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(3),r=n(2),i=Object(a.a)((function e(t,n){Object(r.a)(this,e),this.insect=void 0,this.team=void 0,this.insect=t,this.team=n}))},32:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return j}));var a=n(6),r=n(7),i=n(3),o=n(2),c=n(20),s=Object(i.a)((function e(){Object(o.a)(this,e)}));function h(e){return"stone"in e?new l(e.stone,e.destination):"origin"in e?new u(e.origin,e.destination):new d}var u=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(e,a){var r;return Object(o.a)(this,n),(r=t.call(this)).origin=void 0,r.destination=void 0,r.origin=e,r.destination=a,r}return Object(i.a)(n,[{key:"compareTo",value:function(e){return e instanceof n&&(Object(c.d)(this.origin,e.origin)&&Object(c.d)(this.destination,e.destination))}}]),n}(s),l=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(e,a){var r;return Object(o.a)(this,n),(r=t.call(this)).stone=void 0,r.destination=void 0,r.stone=e,r.destination=a,r}return Object(i.a)(n,[{key:"compareTo",value:function(e){return e instanceof n&&(this.stone.team===e.stone.team&&this.stone.insect===e.stone.insect&&Object(c.d)(this.destination,e.destination))}}]),n}(s),d=function(e){Object(a.a)(n,e);var t=Object(r.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"compareTo",value:function(e){return e instanceof n}}]),n}(s),j=new d},62:function(e,t,n){"use strict";var a=n(21),r=n(16),i=n(26),o=n(50),c=n(244),s=n(20),h=n(0),u=n(57),l=n(146),d=n(22),j=n(4);function b(e){var t=e.stone,n=e.layout,a=void 0===n?s.i:n,i=e.hex,o=e.handleClick,c=void 0===o?function(){}:o,b=e.height,f=void 0===b?0:b,v=t.team===d.a.WHITE?"red":"blue",O=Object(h.useRef)(null),p=Object(h.useState)(!1),m=Object(r.a)(p,2),g=m[0],x=m[1],y=s.h(a,i),w=y.x,k=y.y,E=a.orientation,S=Object(u.useSpring)({color:g?"grey":v,rotation:g?[0,Math.PI,0]:[0,0,0]});return Object(j.jsx)(h.Suspense,{fallback:null,children:Object(j.jsxs)("group",{position:[w,k,f],rotation:[Math.PI/2,E===s.j?Math.PI/6:0,0],onPointerDown:function(){c(i)},children:[Object(j.jsxs)(u.animated.mesh,{position:[0,-.5,0],ref:O,onPointerOver:function(e){return x(!0)},onPointerOut:function(e){return x(!1)},children:[Object(j.jsx)("cylinderBufferGeometry",{args:[1,1,.25,6]}),Object(j.jsx)(u.animated.meshStandardMaterial,{color:S.color})]}),Object(j.jsx)(l.a,{insect:t.insect,rotation:S.rotation})]})})}function f(e){var t=e.layout,n=e.hex,a=e.team,i=e.height,o=e.handleClick,c=void 0===o?function(){return console.log("no Click handler given")}:o,l=Object(h.useRef)(null),b=Object(h.useState)(!1),f=Object(r.a)(b,2),v=f[0],O=f[1],p=Object(u.useSpring)({opacity:v?.9:.3}).opacity,m=s.h(t,n),g=m.x,x=m.y,y=t.orientation,w=a===d.a.WHITE?"red":"blue";return Object(j.jsxs)("mesh",{position:[g,x,i-.5],rotation:[Math.PI/2,y===s.j?Math.PI/6:0,0],onPointerDown:function(){c(n)},ref:l,onPointerOver:function(e){return O(!0)},onPointerOut:function(e){return O(!1)},children:[Object(j.jsx)("cylinderBufferGeometry",{args:[1,1,.25,6]}),Object(j.jsx)(u.animated.meshStandardMaterial,{color:w,transparent:!0,opacity:p})]})}var v=n(197);t.a=function(e){var t,n=e.hive,h=e.handleClick,u=void 0===h?function(){return console.log("No click handler given")}:h,l=e.highlighted,d=void 0===l?[]:l,O=e.team,p=void 0===O?null:O,m=e.interactive,g=void 0===m||m,x=e.canvasHeight,y=void 0===x?"50vw":x,w=e.cameraOpts,k=void 0===w?{}:w,E=e.lookAt,S=void 0===E?[0,0,0]:E,T=[],_=s.i,A=Object(i.a)(n.map.keys());try{var I=function(){var e=t.value;n.map.get(e).forEach((function(t,n){T.push(Object(j.jsx)(b,{hex:e,stone:t,height:n,layout:_,handleClick:u},""+e.q+e.r+t.insect))}))};for(A.s();!(t=A.n()).done;)I()}catch(C){A.e(C)}finally{A.f()}var H=[];return d.forEach((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];H.push(Object(j.jsx)(f,{layout:_,hex:n,team:p,handleClick:u,height:a}))})),Object(j.jsx)(v.a,{style:{height:y},children:Object(j.jsxs)(o.a,{camera:Object(a.a)({near:.1,far:100},k),onCreated:function(e){e.camera.lookAt(S[0],S[1],S[2])},children:[g?Object(j.jsx)(c.a,{}):null,Object(j.jsx)("ambientLight",{}),Object(j.jsx)("pointLight",{position:[10,10,10]}),T,H]})})}},63:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return b}));var a=n(26),r=n(16),i=n(0),o=n(22),c=n(19),s=(n(50),n(146),n(37)),h=n(118),u=n(197),l=(n(57),n(4)),d={beetle:"bug",bee:"chess queen",spider:"chess pawn",grasshopper:"chess knight",ant:"chess bishop"};function j(e){var t,n,o=e.stones,u=e.active,j=e.handleClick,b=void 0===j?function(e){}:j,f=e.allowedToDrop,v=void 0===f?function(e){return!0}:f,O=Object(i.useState)(null),p=Object(r.a)(O,2)[1],m={},g=Object(a.a)(o);try{for(g.s();!(n=g.n()).done;){var x=n.value,y=x.insect,w=x.team;t=w,m.hasOwnProperty(y)?m[y]++:m[y]=1}}catch(k){g.e(k)}finally{g.f()}return Object(l.jsx)(l.Fragment,{children:Array.from(Object.values(c.a)).map((function(e,n){var a=m[e],r=u&&v(e),i="white"===t?"red":"blue";return Object(l.jsxs)(s.a,{as:"div",disabled:!r,labelPosition:"right",onClick:function(){b(e),p(e)},children:[Object(l.jsx)(s.a,{color:i,icon:d[e]}),Object(l.jsx)(h.a,{as:"a",basic:!0,pointing:"left",children:a||0})]},e)}))})}function b(e){var t=e.stones,n=e.team,a=e.handleClick,r=void 0===a?function(){return console.log("No click handler given")}:a,i=e.allowedToDrop;return Object(l.jsxs)(u.a,{textAlign:"center",children:[Object(l.jsx)(s.a.Group,{size:"tiny",children:Object(l.jsx)(j,{active:n===o.a.BLACK,stones:t.get(o.a.BLACK),handleClick:n===o.a.BLACK?r:function(){},allowedToDrop:i})}),Object(l.jsx)(s.a.Group,{size:"tiny",children:Object(l.jsx)(j,{active:n===o.a.WHITE,stones:t.get(o.a.WHITE),handleClick:n===o.a.WHITE?r:function(){},allowedToDrop:i})})]})}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(26),r=n(16),i=n(2),o=n(3),c=n(19),s=n(27),h=n(22),u=n(20),l=n(32),d=n(114),j=function(){function e(){var t=this;Object(i.a)(this,e),this.hive=void 0,this.turnNumber=void 0,this._stones=void 0,this._beeMove=void 0,this._actions=void 0,this._surrender=void 0,this.startingInsects=[c.a.BEE,c.a.SPIDER,c.a.SPIDER,c.a.ANT,c.a.ANT,c.a.ANT,c.a.GRASSHOPPER,c.a.GRASSHOPPER,c.a.GRASSHOPPER,c.a.BEETLE,c.a.BEETLE],this.hive=new d.a,this.turnNumber=0,this._beeMove=new Map([[h.a.WHITE,!1],[h.a.BLACK,!1]]),this._stones=new Map;for(var n=function(){var e=r[a];t._stones.set(e,t.startingInsects.map((function(t){return new s.a(t,e)})))},a=0,r=[h.a.WHITE,h.a.BLACK];a<r.length;a++)n()}return Object(o.a)(e,[{key:"stones",get:function(){return this._stones.get(this.team)}},{key:"team",get:function(){return this.turnNumber%2===0?h.a.WHITE:h.a.BLACK}},{key:"gameOver",get:function(){return!!this.result.some((function(e){return e}))}},{key:"result",get:function(){return this._surrender===h.a.WHITE?[!0,!1]:this._surrender===h.a.BLACK?[!1,!0]:this.hive.gameResult()}},{key:"surrender",value:function(e){this._surrender=e}},{key:"moveAllowed",get:function(){return this._beeMove.get(this.team)}},{key:"generateDrops",value:function(){return 0===this.turnNumber?[u.a(0,0)]:1===this.turnNumber?[u.a(0,-1)]:this.hive.generateDrops(this.team)}},{key:"_getActions",value:function(){var e=this,t=[],n=this.stones.map((function(e){return e.insect})),a=new Set(n),i=Array.from(a).map((function(t){return new s.a(t,e.team)}));return this.turnNumber>=6&&!this.moveAllowed?this.hive.generateDrops(this.team).forEach((function(n){return t.push(new l.a(new s.a(c.a.BEE,e.team),n))})):i.length&&this.generateDrops().forEach((function(e){return i.forEach((function(n){return t.push(new l.a(n,e))}))})),this.moveAllowed&&this.hive.generateMoves(this.team).forEach((function(e){var n=Object(r.a)(e,2),a=n[0],i=n[1];t.push(new l.b(a,i))})),t.length?t:[l.c]}},{key:"actions",get:function(){return this._actions||(this._actions=this._getActions()),this._actions}},{key:"isLegal",value:function(e){return this.actions.some((function(t){return e.compareTo(t)}))}},{key:"apply",value:function(e){var t;if(e instanceof l.b)t=this.hive.at(e.origin),this.hive.removeStone(e.origin),this.hive.addStone(e.destination,t);else if(e instanceof l.a){(t=e.stone).insect===c.a.BEE&&this._beeMove.set(this.team,!0);var n=-1;this.stones.forEach((function(e,a){t.insect===e.insect&&(n=a)})),this.stones.splice(n,1),this.hive.addStone(e.destination,t)}return delete this._actions,this.turnNumber++,this}},{key:"undo",value:function(e){var t;return e instanceof l.b?(t=this.hive.at(e.destination),this.hive.removeStone(e.destination),this.hive.addStone(e.origin,t)):e instanceof l.a&&((t=e.stone).insect===c.a.BEE&&this._beeMove.set(this.team,!1),this.stones.push(t),this.hive.removeStone(e.destination)),delete this._actions,this.turnNumber--,this}},{key:"step",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return this.apply(e(this.actions))}},{key:"allowedToMove",value:function(e){if(this.moveAllowed){var t,n=Object(a.a)(this.actions);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof l.b&&u.d(r.origin,e))return!0}}catch(i){n.e(i)}finally{n.f()}}return!1}},{key:"allowedToDrop",value:function(e){var t,n=Object(a.a)(this.actions);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof l.a&&r.stone.insect===e)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"getDestinations",value:function(e,t){var n=this,a=[];return e instanceof l.b?a=this.hive.generateMovesFrom(t).map((function(e){return[e,n.hive.height(e)]})):e instanceof l.a&&(a=this.generateDrops().map((function(e){return[e,0]}))),a}}]),e}();function b(e){return e[Math.floor(Math.random()*e.length)]}},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(16),r=n(0),i=n(32),o=n(27);function c(e,t){var n=Object(r.useState)(null),c=Object(a.a)(n,2),s=c[0],h=c[1],u=Object(r.useState)(null),l=Object(a.a)(u,2),d=l[0],j=l[1];return{highlighted:d?t.getDestinations(s,d):[],handleBoardClick:function(n){if(d){var a=new s.constructor(d,n);e(a)?(j(null),h(null)):j(null)}else t.allowedToMove(n)&&(h(new i.b),j(n))},handleDropClick:function(e){t.allowedToDrop(e)?(h(new i.a),j(new o.a(e,t.team))):j(null)}}}}},[[227,1,2]]]);
//# sourceMappingURL=main.50752bd7.chunk.js.map