(this["webpackJsonpcra-hive"]=this["webpackJsonpcra-hive"]||[]).push([[4],{306:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return L}));var r=n(30);var c=n(17),a=n(163);function i(e,t){return{highlighted:[],handleBoardClick:function(){return console.log("Remote player's turn")},handleDropClick:function(){return console.log("Remote player's turn")}}}var o=n(26),s=n(0),u=n(197),j=n(240),l=n(303),b=n(237),d=n(4);function O(e){var t=e.socket,n=Object(s.useState)([]),r=Object(c.a)(n,2),a=r[0],i=r[1],O=Object(s.useState)(""),f=Object(c.a)(O,2),h=f[0],x=f[1];Object(s.useEffect)((function(){var e=function(e){i((function(t){return[].concat(Object(o.a)(t),[e])}))};return t.on("chatMessage",e),function(){t.off("chatMessage",e)}}),[t]);return Object(d.jsx)("div",{children:Object(d.jsxs)(u.a,{fluid:!0,children:[Object(d.jsx)(j.a.Group,{size:"small",style:{height:"30vw",overflow:"auto"},children:a.map((function(e){var n=e.text,r=e.sender,c=e.time;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j.a,{inverted:!0,floated:r===t.id?"left":"right",color:r===t.id?"yellow":"green",style:{borderRadius:r===t.id?"25px 25px 25px 0px":"25px 25px 0px 25px"},children:n},c),Object(d.jsx)(l.a,{hidden:!0,clearing:!0})]})}))}),Object(d.jsx)("form",{onSubmit:function(e){h&&(t.emit("chatMessage",h),x("")),e.preventDefault()},children:Object(d.jsx)(b.a,{fluid:!0,focus:!0,type:"text",value:h,onChange:function(e){return x(e.target.value)},placeholder:"Type something",action:{icon:"send",color:"blue"}})})]})})}var f=n(162),h=n(304),x=n(34),p=n(83),m=n(46);function v(){var e=Object(s.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),i=Object(c.a)(a,2),o=i[0],u=i[1],j=document.URL,l={title:"HiveMind",text:"You are challenged for a game of Hive!",url:j=j.match("team=white")?j.replace("team=white","team=black"):j.replace("team=black","team=white")};return navigator.share?Object(d.jsxs)(x.a,{size:"tiny",color:o?"grey":"black",onClick:function(){navigator.share(l).then((function(){return u(!0)})).catch((function(e){return alert("Error sharing: "+e)}))},children:[Object(d.jsx)(p.a,{name:"share alternate"}),o?"Shared":"Share the link"]}):Object(d.jsxs)(x.a,{size:"tiny",color:n?"grey":"black",onClick:function(){navigator.clipboard.writeText(j).then((function(){return r(!0)})).catch((function(e){return alert("Error in copying text: "+e)}))},children:[Object(d.jsx)(p.a,{name:"copy"}),n?"Copied to clipboard":"Click to copy link"]})}function g(e){var t=e.open;e.setOpen;return Object(d.jsxs)(f.a,{dimmer:"blurring",open:t,children:[Object(d.jsx)(f.a.Header,{children:" Invite a player "}),Object(d.jsx)(f.a.Content,{children:Object(d.jsx)(j.a,{inverted:!0,children:Object(d.jsx)(h.a,{inline:!0,indeterminate:!0,children:"Waiting for your opponent to join"})})}),Object(d.jsxs)(f.a.Actions,{children:[Object(d.jsxs)(x.a,{size:"tiny",negative:!0,as:m.b,to:"/",children:[Object(d.jsx)(p.a,{name:"cancel"}),"Cancel"]}),Object(d.jsx)(v,{})]})]})}var y=n(271),k=n.n(y),S=n(186);var w=n(184),C=n(113),A=n(305);function M(e){var t=e.surrender,n=Object(s.useState)(!1),r=Object(c.a)(n,2),a=r[0],i=r[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(x.a,{size:"mini",onClick:function(){return i(!0)},children:[Object(d.jsx)(p.a,{name:"flag outline"}),"Surrender"]}),Object(d.jsx)(A.a,{open:a,onCancel:function(){return i(!1)},onConfirm:function(){i(!1),t()}})]})}var z=n(182);function E(e){var t=e.team,n=e.state,r=e.surrender,c=n.team===t?"It's your turn":"It's your opponents turn",a=Object(z.b)(n.result);return console.log(n),Object(d.jsxs)(u.a,{children:[Object(d.jsx)(C.a,{color:Object(z.a)(t),children:"Your team"}),Object(d.jsx)(C.a,{color:Object(z.a)(n.team),children:c}),Object(d.jsxs)(C.a,{basic:!0,children:["State: ",a]}),Object(d.jsx)(v,{}),Object(d.jsx)(M,{surrender:r})]})}function R(e){var t=e.socket,n=e.gid,r=e.p1,a=e.p2,i=e.team,o=function(){var e=Object(s.useState)(0),t=Object(c.a)(e,2)[1];return function(){return t((function(e){return e+1}))}}(),u=Object(w.a)(),j=u.apply,l=u.state;return Object(s.useEffect)((function(){t.emit("joinGame",{gid:n,team:i});var e=function(e){j(e),o()};return t.on("updateAction",e),t.on("surrender",(function(e){var t=e.team;l.surrender(t),o()})),function(){t.off("updateAction",e)}}),[t]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(E,{team:i,state:l,surrender:function(){return t.emit("surrender")}}),Object(d.jsx)(G,{state:l,p1:r,p2:a,submitAction:function(e){return t.emit("intendAction",{action:e})}})]})}function G(e){var t=e.state,n=e.p1,r=e.p2,c=e.submitAction,a=(t.turnNumber%2===0?n:r)(c,t);return Object(d.jsx)(S.a,{controller:a,state:t})}function I(e){var t,n,r=e.gid,o=e.team,u=Object(s.useState)(null),j=Object(c.a)(u,2),l=j[0],b=j[1],f=Object(s.useState)(!0),h=Object(c.a)(f,2),x=h[0],p=h[1];return Object(s.useEffect)((function(){var e=k()();return b(e),e.on("startGame",(function(){p(!1)})),function(){e.close()}}),[b]),"white"===o?(t=a.a,n=i):(t=i,n=a.a),Object(d.jsxs)("div",{children:[l?Object(d.jsxs)("div",{children:[Object(d.jsx)(R,{socket:l,gid:r,p1:t,p2:n,team:o}),Object(d.jsx)(O,{socket:l})]}):"Not Connected",Object(d.jsx)(g,{open:x,setOpen:p})]})}var F=n(173);function H(){var e=a.a,t=a.a;return Object(d.jsx)(F.a,{p1:e,p2:t})}function D(e,t){e(t.actions[Math.floor(Math.random()*t.actions.length)])}function J(e){var t,n;return"white"===e.team?(t=a.a,n=D):(t=D,n=a.a),Object(d.jsx)(F.a,{p1:t,p2:n})}function L(){var e=Object(r.g)().gid,t=new URLSearchParams(Object(r.f)().search),n=t.get("team")||"white",c=t.get("mode")||"local";return"online"===c?Object(d.jsx)(I,{gid:e,team:n}):"local"===c?Object(d.jsx)(H,{}):"ai"===c?Object(d.jsx)(J,{team:n}):Object(d.jsx)("div",{children:"Invalid Game"})}}}]);
//# sourceMappingURL=4.5ee9ebc5.chunk.js.map